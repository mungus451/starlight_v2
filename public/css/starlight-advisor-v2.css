/* 
* Starlight Dominion V2 - Advisor HUD 
* Filename: starlight-advisor-v2.css
* Description: Styles for the new universal advisor panel layout.
*/

/* --- ADVISOR LAYOUT GRID --- */
.advisor-layout-grid {
    display: grid;
    /* 
       Grid Columns:
       1fr (Main Content) | 280px (Space reserved for Fixed Advisor Panel)
       Note: The fixed panel sits visually on top of the 280px column space.
    */
    grid-template-columns: 1fr 280px;
    grid-template-rows: auto;
    gap: 0; /* Remove gap as sidebar is flush */
    padding-top: 0; /* Align with top */
}

@media (max-width: 1200px) {
    .advisor-layout-grid {
        grid-template-columns: 1fr; /* Stack vertically on smaller screens */
        padding-top: 1rem;
        gap: 1.5rem;
    }
}

/* Main content area within the grid */
.advisor-main-content {
    grid-column: 1 / 2;
    padding: 1.5rem; /* Add padding here since grid gap is gone */
    min-width: 0; /* CRITICAL: Allows grid item to shrink below content size */
    overflow-x: hidden; /* Prevents internal spillover */
}

/* Advisor panel container */
.advisor-panel {
    /* Fixed Positioning for Desktop */
    position: fixed;
    top: 60px; /* Below Navbar */
    right: 0;
    width: 280px;
    height: calc(100vh - 60px);
    
    /* Styling */
    background-color: rgba(13, 17, 23, 0.95); /* Darker opacity for legibility */
    border-left: 1px solid var(--border);
    border-radius: 0; /* Flush edges */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    
    /* Scrolling & Spacing */
    overflow-y: auto;
    overflow-x: hidden; /* Prevent horizontal scroll when collapsing */
    padding: 1.5rem;
    z-index: 800; /* Below modals (1000+) but above page content */
    
    /* Box Shadow for depth */
    box-shadow: -4px 0 15px rgba(0, 0, 0, 0.3);
    
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.advisor-panel.collapsed {
    width: 50px;
    padding: 1.5rem 0; /* Remove horizontal padding */
}

/* Hide content when collapsed */
.advisor-panel.collapsed .advisor-header,
.advisor-panel.collapsed .advisor-core-stats,
.advisor-panel.collapsed .advisor-pod {
    opacity: 0;
    pointer-events: none;
    display: none;
}

/* Toggle Button (Middle-Left Handle) */
.advisor-toggle-btn {
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    background: rgba(13, 17, 23, 0.95);
    border: 1px solid var(--border);
    border-left: none;
    color: var(--accent);
    cursor: pointer;
    font-size: 0.7rem;
    padding: 15px 4px;
    border-radius: 0 8px 8px 0; /* Rounded on right side initially? No, needs to be on left */
    /* Wait, this button sits on the border line. 
       If panel is right-fixed, the button should protrude to the LEFT of the panel. 
       However, inside the panel (overflow hidden?), absolute positioning relative to panel might clip it.
       Actually, standard pattern: put it inside, aligned to left edge.
    */
    border-radius: 8px 0 0 8px; 
    transition: all 0.3s;
    z-index: 801;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);
}

.advisor-toggle-btn:hover {
    color: #fff;
    background: rgba(0, 243, 255, 0.1);
}

/* When Collapsed: Button flips and stays visible */
.advisor-panel.collapsed .advisor-toggle-btn {
    left: 50%;
    transform: translate(-50%, -50%) rotate(180deg);
    border-radius: 4px;
    border: 1px solid var(--border);
    width: 30px;
    height: 30px;
    padding: 0;
}

/* 
   Correction: The Uplink button hangs OFF the side. 
   For the Advisor panel (right side), the button should visually hang off the LEFT side of the panel.
   But if overflow is hidden, we can't hang it outside unless we set overflow visible.
   Let's check .alliance-uplink styles. It uses overflow-y: auto; overflow-x: hidden.
   The button is absolute.
   
   If I place it at `left: 0`, it is inside the panel.
   To match the "hanging tab" look, the panel needs to be the container.
   
   Let's stick to a simple internal toggle for now, or positioned relative to the panel.
   For the Right Sidebar, the toggle usually sits on the left border.
*/
.advisor-toggle-btn {
    position: absolute;
    top: 50%;
    left: 0; /* Aligned to left edge */
    transform: translateY(-50%);
    width: 24px;
    height: 60px;
    border-right: 1px solid var(--border);
    border-radius: 0 8px 8px 0; 
    /* Actually, purely internal 'tab' on the left wall */
}

/* Layout Grid Adjustment for Collapsed State */
body.advisor-collapsed .advisor-layout-grid {
    grid-template-columns: 1fr 50px;
}

@media (max-width: 1200px) {
    .advisor-panel {
        /* Reset to static flow on mobile */
        position: static;
        width: 100%;
        height: auto;
        overflow-y: visible;
        margin-top: 0;
        border-left: none;
        border: 1px solid var(--border);
        border-radius: 12px;
        box-shadow: none;
        background-color: rgba(13, 17, 23, 0.9);
    }
    
    /* Hide toggle on mobile */
    .advisor-toggle-btn {
        display: none;
    }
}

/* Advisor Header */
.advisor-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
}
.advisor-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 2px solid var(--accent);
    object-fit: cover;
}
.advisor-player-info h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: #fff;
}
.advisor-player-info .advisor-player-level {
    font-size: 0.8rem;
    color: var(--muted);
}

/* Core Stats Section */
.advisor-core-stats {
    margin-bottom: 1.5rem;
}
.advisor-stat {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Allow wrapping for long labels/values */
    gap: 0.5rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}
.advisor-stat:last-child {
    border-bottom: none;
}
.advisor-stat-label {
    color: var(--muted);
    font-size: 0.8rem;
    flex: 1 1 auto; /* Allow label to take available space */
    min-width: 120px; /* Ensure label doesn't get too squeezed */
}
.advisor-stat-value {
    font-weight: 600;
    font-size: 0.9rem;
    color: #fff;
    text-align: right;
    flex: 1 0 auto; /* Allow value to stay on its own line if needed */
}
.advisor-stat-value.accent {
    color: var(--accent-2);
}

/* Advisor Pods (Collapsible Sections) */
.advisor-pod {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    margin-bottom: 1rem;
    border: 1px solid var(--border);
}
.advisor-pod-header {
    padding: 0.75rem 1rem;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255, 255, 255, 0.03);
    border-bottom: 1px solid transparent;
    transition: background 0.2s;
}
.advisor-pod-header:hover {
    background: rgba(255, 255, 255, 0.05);
}
.advisor-pod-header h4 {
    margin: 0;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.advisor-pod-header .toggle-icon {
    transition: transform 0.3s ease;
}
.advisor-pod-content {
    padding: 1rem;
    display: none; /* Hidden by default */
    border-top: 1px solid var(--border);
}

/* Pod Open State */
.advisor-pod.open .advisor-pod-content {
    display: block;
}
.advisor-pod.open .advisor-pod-header {
    border-bottom-color: var(--border);
}
.advisor-pod.open .toggle-icon {
    transform: rotate(180deg);
}


/* Scrollbar for Advisor Panel */
.advisor-panel::-webkit-scrollbar {
    width: 6px;
}
.advisor-panel::-webkit-scrollbar-track {
    background: transparent;
}
.advisor-panel::-webkit-scrollbar-thumb {
    background-color: var(--border);
    border-radius: 10px;
}

/* Realm News Specific Styles */
.realm-news-title {
    margin: 0 0 0.5rem 0;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--accent-2);
}
.realm-news-content {
    font-size: 0.8rem;
    color: var(--muted);
    line-height: 1.5;
    margin-bottom: 1rem;
}
.realm-news-date {
    font-size: 0.75rem;
    color: var(--muted);
    opacity: 0.7;
    display: block;
    text-align: right;
}

/* Recent Battles List */
.advisor-battle-list {
    list-style: none;
    padding: 0;
    margin: 1rem 0 0 0;
}
.advisor-battle-list li {
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}
.advisor-battle-list li:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}
.advisor-battle-link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    text-decoration: none;
    color: #fff;
    font-size: 0.8rem;
    transition: color 0.2s ease;
}
.advisor-battle-link:hover {
    color: var(--accent);
}
.battle-attacker,
.battle-defender {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.battle-attacker {
    text-align: left;
}
.battle-defender {
    text-align: right;
}
.battle-result {
    margin: 0 10px;
    font-weight: 600;
    text-transform: uppercase;
    flex-shrink: 0;
}

/* Utility Classes for Armory Layout */
.flex-gap-sm {
    display: flex;
    gap: 0.5rem;
}
.w-full {
    width: 100%;
}
.flex-grow-1 {
    flex-grow: 1;
}
.mb-2 {
    margin-bottom: 1rem;
}

/* --- ARMORY SPECIFIC GRID & CARD STYLES --- */
.structures-grid {
    display: grid;
    /* Increased to 340px to match Dashboard 'feel' (2 cols on laptops) */
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

/* New: Black Market Specific Grid (Forced 2-Column) */
.black-market-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
}
@media (max-width: 992px) {
    .black-market-grid {
        grid-template-columns: 1fr;
    }
}

.structure-card {
    background: rgba(13, 17, 23, 0.85);
    border: 1px solid var(--border);
    border-radius: 12px;
    backdrop-filter: blur(5px);
    transition: transform 0.2s, box-shadow 0.2s;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.structure-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.4);
    border-color: rgba(45, 209, 209, 0.3);
}

.card-header-main {
    padding: 1rem;
    background: rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 1rem;
    border-bottom: 1px solid var(--border);
}

.card-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    color: var(--accent);
    background: rgba(45, 209, 209, 0.1);
    border: 1px solid rgba(45, 209, 209, 0.2);
}

.card-title-group h4 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    text-transform: uppercase;
    span {
        font-size: 0.8rem;
        color: var(--accent);
        text-transform: uppercase;
    }
}
.card-title-group span {
    font-size: 0.8rem;
    color: var(--accent);
    text-transform: uppercase;
}

.card-body-main {
    padding: 1rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.resource-cost-grid {
    background: rgba(0,0,0,0.2);
    padding: 0.75rem;
    border-radius: 8px;
    font-size: 0.85rem;
    margin-bottom: 1rem;
}

/* Colors & Accents */
.text-neon-blue { color: #00f3ff; text-shadow: 0 0 10px rgba(0, 243, 255, 0.3); }
.border-neon { border-color: #00f3ff !important; box-shadow: 0 0 10px rgba(0, 243, 255, 0.1); }
.text-purple { color: #b794f4; }
.text-info { color: var(--accent); }
.text-warning { color: var(--accent-2); }
.text-success { color: var(--accent-green); }
.text-danger { color: var(--accent-red); }
.bg-dark { background-color: rgba(0,0,0,0.3); }

/* Badges */
.badge {
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

/* Forms */
.form-control {
    width: 100%;
    padding: 0.5rem;
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: #fff;
    font-size: 0.9rem;
}
.form-control:focus {
    border-color: var(--accent);
    outline: none;
}

/* Buttons */
.btn {
    padding: 0.5rem 1rem;
    border-radius: 6px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
    font-size: 0.85rem;
    text-align: center;
    text-decoration: none;
}
.btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
}
.btn-primary {
    background: var(--accent);
    color: #02030a;
}
.btn-primary:hover {
    filter: brightness(1.1);
}
.btn-primary:disabled {
    background: #333;
    color: #666;
    cursor: not-allowed;
    filter: none;
}
.btn-outline-warning {
    background: transparent;
    border: 1px solid var(--accent-2);
    color: var(--accent-2);
}
.btn-outline-warning:hover {
    background: var(--accent-2);
    color: #000;
}
.btn-outline-info {
    background: transparent;
    border: 1px solid var(--accent);
    color: var(--accent);
}
.btn-outline-info:hover {
    background: var(--accent);
    color: #000;
}

/* --- ARMORY CONFIGURATOR UI --- */
.slot-card {
    min-height: 480px;
    display: flex;
    flex-direction: column;
}

.equipped-item-display {
    background: rgba(0, 243, 255, 0.05);
    border: 1px solid rgba(0, 243, 255, 0.2);
    padding: 0.75rem;
    border-radius: 8px;
    text-align: center;
}

.item-info-area {
    flex-grow: 1;
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    transition: all 0.3s ease;
}

.stat-pill {
    display: inline-block;
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}
.stat-pill.attack { background: rgba(229, 62, 62, 0.2); color: #feb2b2; border: 1px solid rgba(229, 62, 62, 0.3); }
.stat-pill.defense { background: rgba(49, 130, 206, 0.2); color: #bee3f8; border: 1px solid rgba(49, 130, 206, 0.3); }
.stat-pill.utility { background: rgba(56, 161, 105, 0.2); color: #c6f6d5; border: 1px solid rgba(56, 161, 105, 0.3); }

.config-qty {
    width: 80px !important;
    text-align: center;
}

.opacity-20 { opacity: 0.2; }
.border-radius-8 { border-radius: 8px; }

/* Icon Helpers */
.icon-gold { color: #ffd700; }
.icon-crystal { color: #00f3ff; }
.icon-matter { color: #b794f4; }

/* --- HUD FLOATING BAR (Batch Actions) --- */
.hud-floating-bar {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 340px;
    background: rgba(13, 17, 23, 0.95);
    border: 1px solid var(--accent);
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.8), 0 0 10px rgba(0, 243, 255, 0.1);
    border-radius: 8px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.hud-header {
    background: rgba(0, 243, 255, 0.1);
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(0, 243, 255, 0.2);
}

.hud-header h3 {
    margin: 0;
    font-size: 0.95rem;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--accent);
    letter-spacing: 1px;
}

.hud-content {
    padding: 15px;
    max-height: 250px;
    overflow-y: auto;
}

.hud-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    padding: 4px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    color: var(--muted);
}

.hud-item:last-child {
    border-bottom: none;
}

.hud-footer {
    padding: 15px;
    background: rgba(0, 0, 0, 0.2);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.hud-total-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    margin-bottom: 5px;
}

.hud-btn-close {
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    font-size: 1.1rem;
    transition: color 0.2s;
}

.hud-btn-close:hover {
    color: #fff;
}

/* --- STRUCTURES CATEGORY NAV --- */
.structure-nav-container {
    margin-bottom: 1.5rem;
    padding: 0.5rem;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border);
    border-radius: 8px;
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    white-space: nowrap;
    backdrop-filter: blur(5px);
}

.structure-nav-btn {
    padding: 0.5rem 1rem;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--muted);
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.structure-nav-btn:hover {
    color: #fff;
    background: rgba(255, 255, 255, 0.05);
}

.structure-nav-btn.active {
    background: rgba(0, 243, 255, 0.1);
    border-color: var(--accent);
    color: var(--accent);
    box-shadow: 0 0 10px rgba(0, 243, 255, 0.1);
}

.structure-category-container {
    display: none;
    animation: fadeIn 0.3s ease-in-out;
}

.structure-category-container.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- STYLISH PAGE HEADERS --- */
.page-header-container {
    border-bottom: 1px solid rgba(0, 243, 255, 0.2);
    padding-bottom: 1rem;
    margin-bottom: 2rem;
    position: relative;
    background: linear-gradient(90deg, rgba(0, 243, 255, 0.05) 0%, transparent 100%);
    padding: 1.5rem;
    border-radius: 8px 8px 0 0;
    border-left: 4px solid var(--accent);
}

.page-title-neon {
    font-family: 'Orbitron', sans-serif;
    font-size: 2.2rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: #fff;
    text-shadow: 0 0 15px rgba(0, 243, 255, 0.6);
    margin: 0 0 0.5rem 0;
}

.page-subtitle-tech {
    font-family: 'Courier New', Courier, monospace;
    font-size: 1rem;
    color: var(--accent-2); /* Gold/Orange */
    letter-spacing: 1px;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
    text-transform: uppercase;
}

.page-subtitle-tech::before {
    content: '[ SYSTEM_READY ]';
    color: var(--accent);
    font-size: 0.8em;
    opacity: 0.8;
}