I"Ý1<h1 id="starlightdominion-v2---ai-agent-documentation">StarlightDominion V2 - AI Agent Documentation</h1>

<p>This documentation describes the AI agents that assist with StarlightDominion V2 development. Each agent specializes in a specific aspect of the project and follows tailored best practices and architectural patterns.</p>

<h2 id="available-agents">Available Agents</h2>

<h3 id="backend-agent"><a href="/docs/agents/backend-agent.md">Backend Agent</a></h3>
<p>Senior backend engineer for PHP/MariaDB development. Specializes in implementing backend features following strict MVC patterns, managing the Service/Repository architecture, and maintaining database integrity.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>PHP 8.3 and MVC architecture</li>
  <li>Service layer business logic</li>
  <li>Repository pattern and database access</li>
  <li>Dependency injection and transactions</li>
  <li>Game mechanics implementation</li>
</ul>

<h3 id="database-architect"><a href="/docs/agents/database-architect.md">Database Architect</a></h3>
<p>Database specialist for schema design, migrations, and data model architecture. Expert in relational database design, optimization, and safe migration patterns.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>Schema design and normalization</li>
  <li>Migration strategies and data integrity</li>
  <li>Query optimization and performance</li>
  <li>Safe evolution of the database</li>
  <li>Transaction management</li>
</ul>

<h3 id="frontend-agent"><a href="/docs/agents/frontend-agent.md">Frontend Agent</a></h3>
<p>Frontend specialist for UI/UX development and vanilla JavaScript. Focuses on user interface, user experience, and client-side interactivity.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>HTML templates and semantic markup</li>
  <li>CSS styling and responsive design</li>
  <li>Vanilla JavaScript interactions</li>
  <li>Form validation and CSRF protection</li>
  <li>Accessibility and user experience</li>
</ul>

<h3 id="game-balance-architect"><a href="/docs/agents/game-balance-architect.md">Game Balance Architect</a></h3>
<p>Game designer and balance specialist focused on game mechanics, economy balance, and player progression. Ensures engaging and fair gameplay.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>Game mechanics design</li>
  <li>Economy and resource balance</li>
  <li>Progression curves and systems</li>
  <li>Competitive balance and fairness</li>
  <li>Preventing exploitation</li>
</ul>

<h3 id="security-agent"><a href="/docs/agents/security-agent.md">Security Agent</a></h3>
<p>Security specialist for identifying vulnerabilities and ensuring defensive best practices. Protects both game integrity and user information.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>Authentication and authorization</li>
  <li>CSRF and XSS prevention</li>
  <li>SQL injection prevention</li>
  <li>Game security and exploit prevention</li>
  <li>Data protection and privacy</li>
</ul>

<h3 id="testing-agent"><a href="/docs/agents/testing-agent.md">Testing Agent</a></h3>
<p>Quality assurance specialist focused on comprehensive testing and test coverage. Ensures reliability and prevents regressions.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>Unit testing and integration tests</li>
  <li>Game simulation testing</li>
  <li>Test coverage and edge cases</li>
  <li>Architecture validation</li>
  <li>Performance testing</li>
</ul>

<h3 id="code-review-agent"><a href="/docs/agents/review-agent.md">Code Review Agent</a></h3>
<p>Code review specialist evaluating architecture, patterns, and best practices. Ensures long-term codebase health and maintainability.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>MVC architecture compliance</li>
  <li>Design patterns and best practices</li>
  <li>Performance optimization</li>
  <li>Code clarity and maintainability</li>
  <li>Security and stability</li>
</ul>

<h3 id="documentation-agent"><a href="/docs/agents/docs-agent.md">Documentation Agent</a></h3>
<p>Expert technical writer for project documentation. Creates and maintains developer-focused documentation for the codebase.</p>

<p><strong>Focus Areas:</strong></p>
<ul>
  <li>Developer documentation</li>
  <li>Architecture documentation</li>
  <li>Setup guides and tutorials</li>
  <li>API reference documentation</li>
  <li>Code example documentation</li>
</ul>

<h2 id="project-context">Project Context</h2>

<p>StarlightDominion V2 is a browser-based space strategy MMO built with:</p>

<ul>
  <li><strong>Backend:</strong> PHP 8.3 with strict MVC architecture</li>
  <li><strong>Database:</strong> MariaDB with PDO prepared statements</li>
  <li><strong>Frontend:</strong> Vanilla JavaScript with semantic HTML</li>
  <li><strong>Routing:</strong> FastRoute (nikic/fast-route)</li>
  <li><strong>Sessions:</strong> Redis with RedisSessionHandler</li>
  <li><strong>Architecture:</strong> Service/Repository pattern with dependency injection</li>
</ul>

<h3 id="key-principles">Key Principles</h3>

<ol>
  <li><strong>Strict MVC Architecture</strong>
    <ul>
      <li>Controllers: HTTP handlers only</li>
      <li>Services: Business logic coordination</li>
      <li>Repositories: Database queries</li>
      <li>Entities: Immutable data objects</li>
    </ul>
  </li>
  <li><strong>Security First</strong>
    <ul>
      <li>CSRF protection on all forms</li>
      <li>Prepared statements for all SQL</li>
      <li>Session-based authentication</li>
      <li>Role-based authorization</li>
    </ul>
  </li>
  <li><strong>Transaction Safety</strong>
    <ul>
      <li>Multi-table operations wrapped in transactions</li>
      <li>Rollback on failure</li>
      <li>Consistent application state</li>
    </ul>
  </li>
  <li><strong>Game Balance Centralization</strong>
    <ul>
      <li>All constants in <code class="language-plaintext highlighter-rouge">/config/game_balance.php</code></li>
      <li>No hardcoded values in application code</li>
      <li>Rational progression curves</li>
    </ul>
  </li>
  <li><strong>Testing and Validation</strong>
    <ul>
      <li>Comprehensive test coverage</li>
      <li>Architecture compliance validation</li>
      <li>Security auditing</li>
    </ul>
  </li>
</ol>

<h2 id="getting-started">Getting Started</h2>

<h3 id="setting-up-your-environment">Setting Up Your Environment</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Clone the repository</span>
git clone https://github.com/mungus451/starlight_v2.git
<span class="nb">cd </span>starlight_v2

<span class="c"># Install dependencies</span>
composer <span class="nb">install</span>

<span class="c"># Copy environment file</span>
<span class="nb">cp</span> .env.example .env

<span class="c"># Configure database in .env</span>
</code></pre></div></div>

<h3 id="running-the-development-server">Running the Development Server</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># From project root</span>
php <span class="nt">-S</span> localhost:8000 <span class="nt">-t</span> public
</code></pre></div></div>

<h3 id="processing-game-turns">Processing Game Turns</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Manual turn processing (economy, income, etc.)</span>
php cron/process_turn.php

<span class="c"># NPC processing</span>
php cron/process_npcs.php
</code></pre></div></div>

<h3 id="running-tests">Running Tests</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># MVC compliance check</span>
php tests/verify_mvc_compliance.php

<span class="c"># Architecture audit</span>
php tests/StrictArchitectureAudit.php

<span class="c"># Lint check</span>
php tests/mvc_lint.php
</code></pre></div></div>

<h2 id="choosing-the-right-agent">Choosing the Right Agent</h2>

<p>When working on StarlightDominion V2, select the appropriate agent based on your task:</p>

<table>
  <thead>
    <tr>
      <th>Task</th>
      <th>Agent</th>
      <th>Related Documentation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Implementing new backend feature</td>
      <td>Backend Agent</td>
      <td><a href="/docs/agents/backend-agent.md">Backend</a></td>
    </tr>
    <tr>
      <td>Database schema or migration</td>
      <td>Database Architect</td>
      <td><a href="/docs/agents/database-architect.md">Database</a></td>
    </tr>
    <tr>
      <td>UI component or JavaScript</td>
      <td>Frontend Agent</td>
      <td><a href="/docs/agents/frontend-agent.md">Frontend</a></td>
    </tr>
    <tr>
      <td>Game mechanic or balance</td>
      <td>Game Balance Architect</td>
      <td><a href="/docs/agents/game-balance-architect.md">Balance</a></td>
    </tr>
    <tr>
      <td>Security review or vulnerability</td>
      <td>Security Agent</td>
      <td><a href="/docs/agents/security-agent.md">Security</a></td>
    </tr>
    <tr>
      <td>Writing or updating tests</td>
      <td>Testing Agent</td>
      <td><a href="/docs/agents/testing-agent.md">Testing</a></td>
    </tr>
    <tr>
      <td>Code review or refactoring</td>
      <td>Code Review Agent</td>
      <td><a href="/docs/agents/review-agent.md">Review</a></td>
    </tr>
    <tr>
      <td>Documentation or guides</td>
      <td>Documentation Agent</td>
      <td><a href="/docs/agents/docs-agent.md">Docs</a></td>
    </tr>
  </tbody>
</table>

<h2 id="common-development-workflows">Common Development Workflows</h2>

<h3 id="adding-a-new-game-feature">Adding a New Game Feature</h3>

<ol>
  <li><strong>Start with Balance</strong>: Define constants in <code class="language-plaintext highlighter-rouge">/config/game_balance.php</code></li>
  <li><strong>Backend Implementation</strong>: Use Backend Agent to implement Service/Repository logic</li>
  <li><strong>Database</strong>: Use Database Architect if schema changes needed</li>
  <li><strong>Controller</strong>: Add controller action and route</li>
  <li><strong>Frontend</strong>: Use Frontend Agent for UI and JavaScript</li>
  <li><strong>Testing</strong>: Use Testing Agent to write comprehensive tests</li>
  <li><strong>Security</strong>: Use Security Agent to review</li>
  <li><strong>Documentation</strong>: Use Documentation Agent to document</li>
</ol>

<h3 id="bug-fix-workflow">Bug Fix Workflow</h3>

<ol>
  <li><strong>Identify</strong>: Use Code Review Agent to understand the issue</li>
  <li><strong>Test</strong>: Use Testing Agent to write a failing test</li>
  <li><strong>Fix</strong>: Use appropriate specialist agent (Backend, Frontend, etc.)</li>
  <li><strong>Verify</strong>: Ensure tests pass and no regressions</li>
  <li><strong>Review</strong>: Use Code Review Agent for final review</li>
</ol>

<h3 id="refactoring">Refactoring</h3>

<ol>
  <li><strong>Plan</strong>: Use Code Review Agent to identify areas</li>
  <li><strong>Implement</strong>: Use Backend Agent or appropriate specialist</li>
  <li><strong>Test</strong>: Use Testing Agent to ensure coverage</li>
  <li><strong>Validate</strong>: Run architecture tests</li>
  <li><strong>Document</strong>: Update Documentation Agent docs</li>
</ol>

<h2 id="additional-resources">Additional Resources</h2>

<ul>
  <li><a href="https://github.com/mungus451/starlight_v2">Project Repository</a></li>
  <li><a href="../README.md">Main README</a></li>
  <li><a href="../DOCKER.md">Docker Setup</a></li>
  <li><a href="../database.sql">Database Schema</a></li>
</ul>

<h2 id="directory-structure">Directory Structure</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>starlight_v2/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Controllers/          # HTTP request handlers
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ Services/         # Business logic layer
â”‚   â”‚   â”œâ”€â”€ Repositories/     # Database access layer
â”‚   â”‚   â”œâ”€â”€ Entities/         # Data objects
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Core/                 # Framework utilities
â”‚   â””â”€â”€ ...
â”œâ”€â”€ config/                   # Game balance and settings
â”œâ”€â”€ cron/                     # Turn processing
â”œâ”€â”€ public/                   # Web-accessible files
â”œâ”€â”€ views/                    # PHP templates
â”œâ”€â”€ migrations/               # Database migrations
â”œâ”€â”€ tests/                    # Test files
â”œâ”€â”€ docs/                     # This documentation
â””â”€â”€ ...
</code></pre></div></div>

<hr />

<p><strong>Last Updated:</strong> December 2025</p>

<p>For questions or contributions, refer to the individual agent documentation pages.</p>
:ET